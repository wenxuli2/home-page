window.onload=function(){contentList=document.querySelector(".content-list");const t=document.querySelector(".search_input_text");document.getElementsByClassName("suggest")[0];const d=document.getElementById("search_result");ajax("../static/data/article_munu.json",function(e){e=new Function("return ("+e+")")();dJson=e.actitle_munu;function r(){for(var e=d.childNodes.length-1;0<=e;e--)d.removeChild(d.childNodes[e])}t.onkeyup=function(e){if(0===this.value.length)r();else{const s=[],o=[],c=[];for(let i=0;i<dJson.length;i++){let t=dJson[i].split(".")[0];let n=a($.ajax({url:"../static/preview/"+dJson[i],async:!1}));if(void 0===n&&(n=""),-1!==t.indexOf(this.value))s.push(t);else{var l=n.indexOf(this.value);if(-1!==l){let e=n.slice(l,l+20);e=(e=e.indexOf("<")?e.split("<")[0]:e)+"...---"+t,o.push(dJson[i]),c.push(e)}}}let t=[];(t=[...s,...c].slice(0,5))?d.style.display="block":d.style.display="none",r();for(let e=0;e<t.length;e++){var n=document.createElement("li"),i=(title=-1===t[e].indexOf("---")?t[e]:t[e].split("---")[1],"article.html?title="+encodeURI(title));n.innerHTML=`<a href= "${i}">${t[e]}</a>`,d.appendChild(n)}}};for(let t=0;t<dJson.length;t++){var n=dJson[t].split(".")[0],i="article.html?title="+encodeURI(n),l=$.ajax({url:"../static/preview/"+dJson[t],async:!1});void 0===(details=a(l))&&(details="");let e=document.createElement("li");e.innerHTML=`<li>
                    <h3 class="title">${n}</h3>
                    <span class="details">${details}...
                        <a href="${i}">查看全文</a>
                    </span>
                 </li>`,contentList.appendChild(e)}function a(e){let t="";var n=e.responseText.match(/.*<!--[ ]{0,5}more[ ]{0,5}-->.*/g);if(n)return n=e.responseText.split("\n").indexOf(n[0]),t=(t=e.responseText.split("\n").splice(0,n).join("").replace(/<\/?.+?>/g,"<br/>").replace(/<br\/><br\/>/g,"<br/>").replace(/<br\/><br\/>/g,"<br/>").replace(/^<br\/>/g,"")).split("<br/>").slice(0,5).join("<br/>")}}),console.log($(window).width()),$(window).width()<1e3?($(".content-list li:nth-child(2n+1)").css("margin-right","100px"),$(".content-list li:nth-child(n)").css("margin-bottom","20px")):($(".content-list li:nth-child(2n+1)").css("margin-right","20px"),$(".content-list li:nth-child(2n)").css("margin-bottom","20px"))};