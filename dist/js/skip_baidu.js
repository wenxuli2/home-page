var suggestContainer=document.getElementsByClassName("suggest")[0],searchInput=document.getElementsByClassName("search_input_text")[0],search_box=document.getElementsByClassName("search_box")[0],searchResult=document.getElementById("search_result");const searchLogs=document.querySelector(".search_logs"),searchShowImages=document.querySelector(".search-engine-logo img");var target_url="https://www.baidu.com/s?word=";function clearContent(){for(var e=searchResult.childNodes.length-1;0<=e;e--)searchResult.removeChild(searchResult.childNodes[e])}searchLogs.addEventListener("click",function(e){"search_log_google"===e.target.className?(searchShowImages.src="./images/google-white.png",target_url="https://www.google.com/search?q="):"search_log_baidu"===e.target.className?(searchShowImages.src="./images/baidu-white.png",target_url="https://www.baidu.com/s?word="):"search_log_github"===e.target.className?(searchShowImages.src="./images/github-white.png",target_url="https://github.com/search?q="):"search_log_juejin"===e.target.className?target_url="https://juejin.cn/search?query=":"search_log_developer"===e.target.className&&(target_url="https://developer.mozilla.org/zh-CN/search?q=")},!1);var timer=null;function handleSuggestion(e){clearContent();var t=e.s;4<t.length&&(t=t.slice(0,5));for(let e=0;e<t.length;e++){var a=document.createElement("li");a.innerHTML=t[e],searchResult.appendChild(a)}for(var r=document.querySelectorAll("script"),s=1,l=r.length;s<l;s++)document.body.removeChild(r[s])}function jumpPage(e){window.open(""+e+encodeURI(searchInput.value))}searchInput.onkeyup=function(e){suggestContainer.style.display="block",0===this.value.length?clearContent():(this.timer&&clearTimeout(this.timer),40!==e.keyCode&&38!==e.keyCode&&(this.timer=setTimeout(()=>{var e=document.createElement("script");e.src="https://www.baidu.com/su?&wd="+encodeURI(this.value.trim())+"&p=3&cb=handleSuggestion",document.body.appendChild(e)},130)))},search_box.addEventListener("click",function(e){var t;"li"===e.target.nodeName.toLowerCase()?(t=e.target.innerText,searchInput.value=t,jumpPage(target_url)):"btn"===e.target.id&&jumpPage(target_url),searchInput.value&&"search_logs"===e.path[1].className&&jumpPage(target_url)},!1);const oBtn=document.querySelector(".search_logs");oBtn.ondblclick=function(e){console.log("双击"),"search_log_google"===e.target.className?target_url="https://www.google.com/":"search_log_baidu"===e.target.className?(searchShowImages.src="./images/baidu-white.png",target_url="https://www.baidu.com/"):"search_log_github"===e.target.className?target_url="https://github.com":"search_log_juejin"===e.target.className?target_url="https://juejin.cn":"search_log_developer"===e.target.className&&(target_url="https://developer.mozilla.org/zh-CN"),jumpPage(target_url)};var i=0,flag=1;search_box.addEventListener("keydown",function(e){var t=searchResult.childNodes.length;13===e.keyCode&&jumpPage(target_url),40===e.keyCode&&(0===flag&&(i+=2),flag=1,e.preventDefault(),(i=t<=i?0:i)<t&&(searchInput.value=searchResult.childNodes[i++].innerText)),38===e.keyCode&&(1===flag&&(i-=2),flag=0,e.preventDefault(),-1<(i=i<0?t-1:i)&&(searchInput.value=searchResult.childNodes[i--].innerText))},!1),document.onclick=()=>clearContent();